import { createServerComponentClient } from '@supabase/auth-helpers-nextjs';
import { cookies } from 'next/headers';

import AuthProvider from '../components/providers/AuthProvider';

export const metadata = {
  title: 'Donna Frontend Prototype',
  description: 'Generated by create next app by DK Kim',
}
export const revalidate = 0;

export default function RootLayout(props: React.PropsWithChildren) {
  const supabase = createServerComponentClient({ cookies });

  const {
    data: { session },
  } = await supabase.auth.getSession();

  return (
    
      <html lang="en">
        <head>
          <title>{metadata.title}</title>
          <meta name="description" content={metadata.description} />
          <meta name="viewport" content="width=device-width, initial-scale=1.0"></meta>
        </head>

        <AuthProvider accessToken={session?.access_token}>{props.children}</AuthProvider>
      </html>
    
  )
}
